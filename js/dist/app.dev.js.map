{"version":3,"sources":["app.js"],"names":["supabase","window","createClient","SUPABASE_URL","SUPABASE_ANON_KEY","error","console","feedbackForm","document","getElementById","nameInput","messageInput","charCount","submitBtn","messagesList","refreshBtn","totalPostsEl","todayPostsEl","addEventListener","loadMessages","setupEventListeners","textContent","value","length","handleSubmit","style","transform","setTimeout","innerHTML","from","select","order","ascending","limit","data","updateStats","map","msg","createMessageCard","join","message","name","escapeHtml","time","formatTime","created_at","e","preventDefault","trim","showToast","disabled","classList","add","insert","remove","messages","today","Date","toDateString","todayCount","filter","dateString","date","now","diff","Math","floor","toLocaleDateString","text","div","createElement","type","existing","querySelector","toast","className","body","appendChild"],"mappings":"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","sourcesContent":["// ============================================\r\n// Feedback Wall App - Main JavaScript\r\n// ============================================\r\n\r\n// Initialize Supabase client\r\nlet supabase;\r\n\r\ntry {\r\n    supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\r\n} catch (error) {\r\n    console.error('Supabase initialization failed:', error);\r\n}\r\n\r\n// DOM Elements\r\nconst feedbackForm = document.getElementById('feedbackForm');\r\nconst nameInput = document.getElementById('nameInput');\r\nconst messageInput = document.getElementById('messageInput');\r\nconst charCount = document.getElementById('charCount');\r\nconst submitBtn = document.getElementById('submitBtn');\r\nconst messagesList = document.getElementById('messagesList');\r\nconst refreshBtn = document.getElementById('refreshBtn');\r\nconst totalPostsEl = document.getElementById('totalPosts');\r\nconst todayPostsEl = document.getElementById('todayPosts');\r\n\r\n// ============================================\r\n// Initialize App\r\n// ============================================\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    loadMessages();\r\n    setupEventListeners();\r\n});\r\n\r\n// ============================================\r\n// Event Listeners\r\n// ============================================\r\nfunction setupEventListeners() {\r\n    // Character counter\r\n    messageInput.addEventListener('input', () => {\r\n        charCount.textContent = messageInput.value.length;\r\n    });\r\n\r\n    // Form submit\r\n    feedbackForm.addEventListener('submit', handleSubmit);\r\n\r\n    // Refresh button\r\n    refreshBtn.addEventListener('click', () => {\r\n        refreshBtn.style.transform = 'rotate(360deg)';\r\n        setTimeout(() => refreshBtn.style.transform = '', 500);\r\n        loadMessages();\r\n    });\r\n}\r\n\r\n// ============================================\r\n// Load Messages from Supabase\r\n// ============================================\r\nasync function loadMessages() {\r\n    messagesList.innerHTML = '<div class=\"loading\">Loading messages...</div>';\r\n\r\n    try {\r\n        // Check if Supabase is configured\r\n        if (SUPABASE_URL === 'YOUR_SUPABASE_URL_HERE') {\r\n            messagesList.innerHTML = `\r\n                <div class=\"error-state\">\r\n                    <strong>‚ö†Ô∏è Setup Required</strong><br>\r\n                    Please configure Supabase in <code>js/config.js</code>\r\n                </div>\r\n            `;\r\n            return;\r\n        }\r\n\r\n        // Fetch messages\r\n        const { data, error } = await supabase\r\n            .from('messages')\r\n            .select('*')\r\n            .order('created_at', { ascending: false })\r\n            .limit(50);\r\n\r\n        if (error) throw error;\r\n\r\n        // Update stats\r\n        updateStats(data);\r\n\r\n        // Render messages\r\n        if (data.length === 0) {\r\n            messagesList.innerHTML = `\r\n                <div class=\"empty-state\">\r\n                    <span>üí≠</span>\r\n                    <p>No messages yet. Be the first to post!</p>\r\n                </div>\r\n            `;\r\n        } else {\r\n            messagesList.innerHTML = data.map(msg => createMessageCard(msg)).join('');\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error('Error loading messages:', error);\r\n        messagesList.innerHTML = `\r\n            <div class=\"error-state\">\r\n                <strong>‚ùå Error loading messages</strong><br>\r\n                ${error.message}\r\n            </div>\r\n        `;\r\n    }\r\n}\r\n\r\n// ============================================\r\n// Create Message Card HTML\r\n// ============================================\r\nfunction createMessageCard(msg) {\r\n    const name = escapeHtml(msg.name || 'Anonymous');\r\n    const message = escapeHtml(msg.message);\r\n    const time = formatTime(msg.created_at);\r\n\r\n    return `\r\n        <div class=\"message-card\">\r\n            <div class=\"message-header\">\r\n                <span class=\"message-author\">${name}</span>\r\n                <span class=\"message-time\">${time}</span>\r\n            </div>\r\n            <p class=\"message-content\">${message}</p>\r\n        </div>\r\n    `;\r\n}\r\n\r\n// ============================================\r\n// Handle Form Submit\r\n// ============================================\r\nasync function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    const name = nameInput.value.trim() || 'Anonymous';\r\n    const message = messageInput.value.trim();\r\n\r\n    if (!message) {\r\n        showToast('Please enter a message', 'error');\r\n        return;\r\n    }\r\n\r\n    // Disable button\r\n    submitBtn.disabled = true;\r\n    submitBtn.classList.add('loading');\r\n\r\n    try {\r\n        const { error } = await supabase\r\n            .from('messages')\r\n            .insert([{ name, message }]);\r\n\r\n        if (error) throw error;\r\n\r\n        // Success\r\n        showToast('Message posted! üéâ', 'success');\r\n        nameInput.value = '';\r\n        messageInput.value = '';\r\n        charCount.textContent = '0';\r\n        loadMessages();\r\n\r\n    } catch (error) {\r\n        console.error('Error posting:', error);\r\n        showToast('Error posting message: ' + error.message, 'error');\r\n    } finally {\r\n        submitBtn.disabled = false;\r\n        submitBtn.classList.remove('loading');\r\n    }\r\n}\r\n\r\n// ============================================\r\n// Update Stats\r\n// ============================================\r\nfunction updateStats(messages) {\r\n    totalPostsEl.textContent = messages.length;\r\n\r\n    // Count today's posts\r\n    const today = new Date().toDateString();\r\n    const todayCount = messages.filter(msg => \r\n        new Date(msg.created_at).toDateString() === today\r\n    ).length;\r\n    todayPostsEl.textContent = todayCount;\r\n}\r\n\r\n// ============================================\r\n// Utility Functions\r\n// ============================================\r\nfunction formatTime(dateString) {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diff = now - date;\r\n\r\n    // Less than 1 minute\r\n    if (diff < 60000) return 'Just now';\r\n    // Less than 1 hour\r\n    if (diff < 3600000) return Math.floor(diff / 60000) + 'm ago';\r\n    // Less than 24 hours\r\n    if (diff < 86400000) return Math.floor(diff / 3600000) + 'h ago';\r\n    // Less than 7 days\r\n    if (diff < 604800000) return Math.floor(diff / 86400000) + 'd ago';\r\n    // Otherwise show date\r\n    return date.toLocaleDateString();\r\n}\r\n\r\nfunction escapeHtml(text) {\r\n    const div = document.createElement('div');\r\n    div.textContent = text;\r\n    return div.innerHTML;\r\n}\r\n\r\nfunction showToast(message, type = '') {\r\n    // Remove existing toast\r\n    const existing = document.querySelector('.toast');\r\n    if (existing) existing.remove();\r\n\r\n    // Create new toast\r\n    const toast = document.createElement('div');\r\n    toast.className = `toast ${type}`;\r\n    toast.textContent = message;\r\n    document.body.appendChild(toast);\r\n\r\n    // Remove after 3 seconds\r\n    setTimeout(() => toast.remove(), 3000);\r\n}\r\n"],"file":"app.dev.js"}