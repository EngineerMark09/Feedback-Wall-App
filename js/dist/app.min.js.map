{"version":3,"sources":["app.js"],"names":["supabase","window","createClient","SUPABASE_URL","SUPABASE_ANON_KEY","console","error","feedbackForm","document","getElementById","nameInput","messageInput","charCount","submitBtn","messagesList","refreshBtn","totalPostsEl","setupEventListeners","textContent","value","length","addEventListener","handleSubmit","transform","style","loadMessages","_ref","data","regeneratorRuntime","async","_context","prev","next","innerHTML","abrupt","awrap","from","select","order","ascending","sent","map","msg","createMessageCard","join","t0","concat","message","stop","name","escapeHtml","time","formatTime","created_at","e","_ref2","_context2","preventDefault","trim","showToast","classList","insert","disabled","remove","finish","updateStats","messages","today","Date","toDateString","todayCount","filter","dateString","date","diff","Math","floor","toLocaleDateString","text","div","createElement","type","arguments","undefined","existing","toast","todayPostsEl","body","appendChild","setTimeout"],"mappings":"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","file":"app.min.js","sourcesContent":["// ============================================\r\n// Feedback Wall App - Main JavaScript\r\n// ============================================\r\n\r\n// Initialize Supabase client\r\nlet supabase;\r\n\r\ntry {\r\n    supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\r\n} catch (error) {\r\n    console.error('Supabase initialization failed:', error);\r\n}\r\n\r\n// DOM Elements\r\nconst feedbackForm = document.getElementById('feedbackForm');\r\nconst nameInput = document.getElementById('nameInput');\r\nconst messageInput = document.getElementById('messageInput');\r\nconst charCount = document.getElementById('charCount');\r\nconst submitBtn = document.getElementById('submitBtn');\r\nconst messagesList = document.getElementById('messagesList');\r\nconst refreshBtn = document.getElementById('refreshBtn');\r\nconst totalPostsEl = document.getElementById('totalPosts');\r\nconst todayPostsEl = document.getElementById('todayPosts');\r\n\r\n// ============================================\r\n// Initialize App\r\n// ============================================\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    loadMessages();\r\n    setupEventListeners();\r\n});\r\n\r\n// ============================================\r\n// Event Listeners\r\n// ============================================\r\nfunction setupEventListeners() {\r\n    // Character counter\r\n    messageInput.addEventListener('input', () => {\r\n        charCount.textContent = messageInput.value.length;\r\n    });\r\n\r\n    // Form submit\r\n    feedbackForm.addEventListener('submit', handleSubmit);\r\n\r\n    // Refresh button\r\n    refreshBtn.addEventListener('click', () => {\r\n        refreshBtn.style.transform = 'rotate(360deg)';\r\n        setTimeout(() => refreshBtn.style.transform = '', 500);\r\n        loadMessages();\r\n    });\r\n}\r\n\r\n// ============================================\r\n// Load Messages from Supabase\r\n// ============================================\r\nasync function loadMessages() {\r\n    messagesList.innerHTML = '<div class=\"loading\">Loading messages...</div>';\r\n\r\n    try {\r\n        // Check if Supabase is configured\r\n        if (SUPABASE_URL === 'YOUR_SUPABASE_URL_HERE') {\r\n            messagesList.innerHTML = `\r\n                <div class=\"error-state\">\r\n                    <strong>‚ö†Ô∏è Setup Required</strong><br>\r\n                    Please configure Supabase in <code>js/config.js</code>\r\n                </div>\r\n            `;\r\n            return;\r\n        }\r\n\r\n        // Fetch messages\r\n        const { data, error } = await supabase\r\n            .from('messages')\r\n            .select('*')\r\n            .order('created_at', { ascending: false })\r\n            .limit(50);\r\n\r\n        if (error) throw error;\r\n\r\n        // Update stats\r\n        updateStats(data);\r\n\r\n        // Render messages\r\n        if (data.length === 0) {\r\n            messagesList.innerHTML = `\r\n                <div class=\"empty-state\">\r\n                    <span>üí≠</span>\r\n                    <p>No messages yet. Be the first to post!</p>\r\n                </div>\r\n            `;\r\n        } else {\r\n            messagesList.innerHTML = data.map(msg => createMessageCard(msg)).join('');\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error('Error loading messages:', error);\r\n        messagesList.innerHTML = `\r\n            <div class=\"error-state\">\r\n                <strong>‚ùå Error loading messages</strong><br>\r\n                ${error.message}\r\n            </div>\r\n        `;\r\n    }\r\n}\r\n\r\n// ============================================\r\n// Create Message Card HTML\r\n// ============================================\r\nfunction createMessageCard(msg) {\r\n    const name = escapeHtml(msg.name || 'Anonymous');\r\n    const message = escapeHtml(msg.message);\r\n    const time = formatTime(msg.created_at);\r\n\r\n    return `\r\n        <div class=\"message-card\">\r\n            <div class=\"message-header\">\r\n                <span class=\"message-author\">${name}</span>\r\n                <span class=\"message-time\">${time}</span>\r\n            </div>\r\n            <p class=\"message-content\">${message}</p>\r\n        </div>\r\n    `;\r\n}\r\n\r\n// ============================================\r\n// Handle Form Submit\r\n// ============================================\r\nasync function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    const name = nameInput.value.trim() || 'Anonymous';\r\n    const message = messageInput.value.trim();\r\n\r\n    if (!message) {\r\n        showToast('Please enter a message', 'error');\r\n        return;\r\n    }\r\n\r\n    // Disable button\r\n    submitBtn.disabled = true;\r\n    submitBtn.classList.add('loading');\r\n\r\n    try {\r\n        const { error } = await supabase\r\n            .from('messages')\r\n            .insert([{ name, message }]);\r\n\r\n        if (error) throw error;\r\n\r\n        // Success\r\n        showToast('Message posted! üéâ', 'success');\r\n        nameInput.value = '';\r\n        messageInput.value = '';\r\n        charCount.textContent = '0';\r\n        loadMessages();\r\n\r\n    } catch (error) {\r\n        console.error('Error posting:', error);\r\n        showToast('Error posting message: ' + error.message, 'error');\r\n    } finally {\r\n        submitBtn.disabled = false;\r\n        submitBtn.classList.remove('loading');\r\n    }\r\n}\r\n\r\n// ============================================\r\n// Update Stats\r\n// ============================================\r\nfunction updateStats(messages) {\r\n    totalPostsEl.textContent = messages.length;\r\n\r\n    // Count today's posts\r\n    const today = new Date().toDateString();\r\n    const todayCount = messages.filter(msg => \r\n        new Date(msg.created_at).toDateString() === today\r\n    ).length;\r\n    todayPostsEl.textContent = todayCount;\r\n}\r\n\r\n// ============================================\r\n// Utility Functions\r\n// ============================================\r\nfunction formatTime(dateString) {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diff = now - date;\r\n\r\n    // Less than 1 minute\r\n    if (diff < 60000) return 'Just now';\r\n    // Less than 1 hour\r\n    if (diff < 3600000) return Math.floor(diff / 60000) + 'm ago';\r\n    // Less than 24 hours\r\n    if (diff < 86400000) return Math.floor(diff / 3600000) + 'h ago';\r\n    // Less than 7 days\r\n    if (diff < 604800000) return Math.floor(diff / 86400000) + 'd ago';\r\n    // Otherwise show date\r\n    return date.toLocaleDateString();\r\n}\r\n\r\nfunction escapeHtml(text) {\r\n    const div = document.createElement('div');\r\n    div.textContent = text;\r\n    return div.innerHTML;\r\n}\r\n\r\nfunction showToast(message, type = '') {\r\n    // Remove existing toast\r\n    const existing = document.querySelector('.toast');\r\n    if (existing) existing.remove();\r\n\r\n    // Create new toast\r\n    const toast = document.createElement('div');\r\n    toast.className = `toast ${type}`;\r\n    toast.textContent = message;\r\n    document.body.appendChild(toast);\r\n\r\n    // Remove after 3 seconds\r\n    setTimeout(() => toast.remove(), 3000);\r\n}\r\n"]}