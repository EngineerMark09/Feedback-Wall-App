"use strict";var supabase;try{supabase=window.supabase.createClient(SUPABASE_URL,SUPABASE_ANON_KEY)}catch(e){console.error("Supabase initialization failed:",e)}var feedbackForm=document.getElementById("feedbackForm"),nameInput=document.getElementById("nameInput"),messageInput=document.getElementById("messageInput"),charCount=document.getElementById("charCount"),submitBtn=document.getElementById("submitBtn"),messagesList=document.getElementById("messagesList"),refreshBtn=document.getElementById("refreshBtn"),totalPostsEl=document.getElementById("totalPosts"),todayPostsEl=document.getElementById("todayPosts");function setupEventListeners(){messageInput.addEventListener("input",function(){charCount.textContent=messageInput.value.length}),feedbackForm.addEventListener("submit",handleSubmit),refreshBtn.addEventListener("click",function(){refreshBtn.style.transform="rotate(360deg)",setTimeout(function(){return refreshBtn.style.transform=""},500),loadMessages()})}function loadMessages(){var t,n,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(messagesList.innerHTML='<div class="loading">Loading messages...</div>',e.prev=1,"YOUR_SUPABASE_URL_HERE"===SUPABASE_URL)return messagesList.innerHTML='\n                <div class="error-state">\n                    <strong>‚ö†Ô∏è Setup Required</strong><br>\n                    Please configure Supabase in <code>js/config.js</code>\n                </div>\n            ',e.abrupt("return");e.next=5;break;case 5:return e.next=7,regeneratorRuntime.awrap(supabase.from("messages").select("*").order("created_at",{ascending:!1}).limit(50));case 7:if(t=e.sent,n=t.data,s=t.error)throw s;e.next=12;break;case 12:updateStats(n),0===n.length?messagesList.innerHTML='\n                <div class="empty-state">\n                    <span>üí≠</span>\n                    <p>No messages yet. Be the first to post!</p>\n                </div>\n            ':messagesList.innerHTML=n.map(function(e){return createMessageCard(e)}).join(""),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.error("Error loading messages:",e.t0),messagesList.innerHTML='\n            <div class="error-state">\n                <strong>‚ùå Error loading messages</strong><br>\n                '.concat(e.t0.message,"\n            </div>\n        ");case 20:case"end":return e.stop()}},null,null,[[1,16]])}function createMessageCard(e){var t=escapeHtml(e.name||"Anonymous"),n=escapeHtml(e.message),s=formatTime(e.created_at);return'\n        <div class="message-card">\n            <div class="message-header">\n                <span class="message-author">'.concat(t,'</span>\n                <span class="message-time">').concat(s,'</span>\n            </div>\n            <p class="message-content">').concat(n,"</p>\n        </div>\n    ")}function handleSubmit(t){var n,s,a,r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=nameInput.value.trim()||"Anonymous",s=messageInput.value.trim()){e.next=6;break}return showToast("Please enter a message","error"),e.abrupt("return");case 6:return submitBtn.disabled=!0,submitBtn.classList.add("loading"),e.prev=8,e.next=11,regeneratorRuntime.awrap(supabase.from("messages").insert([{name:n,message:s}]));case 11:if(a=e.sent,r=a.error)throw r;e.next=15;break;case 15:showToast("Message posted! üéâ","success"),nameInput.value="",messageInput.value="",charCount.textContent="0",loadMessages(),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(8),console.error("Error posting:",e.t0),showToast("Error posting message: "+e.t0.message,"error");case 26:return e.prev=26,submitBtn.disabled=!1,submitBtn.classList.remove("loading"),e.finish(26);case 30:case"end":return e.stop()}},null,null,[[8,22,26,30]])}function updateStats(e){totalPostsEl.textContent=e.length;var t=(new Date).toDateString(),n=e.filter(function(e){return new Date(e.created_at).toDateString()===t}).length;todayPostsEl.textContent=n}function formatTime(e){var t=new Date(e),n=new Date-t;return n<6e4?"Just now":n<36e5?Math.floor(n/6e4)+"m ago":n<864e5?Math.floor(n/36e5)+"h ago":n<6048e5?Math.floor(n/864e5)+"d ago":t.toLocaleDateString()}function escapeHtml(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}function showToast(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=document.querySelector(".toast");n&&n.remove();var s=document.createElement("div");s.className="toast ".concat(t),s.textContent=e,document.body.appendChild(s),setTimeout(function(){return s.remove()},3e3)}document.addEventListener("DOMContentLoaded",function(){loadMessages(),setupEventListeners()});
//# sourceMappingURL=app.min.js.map
